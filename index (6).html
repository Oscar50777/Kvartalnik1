<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∫–≤–∞—Ä—Ç–∞–ª—å–Ω—ã—Ö –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–π</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
      background: #f8f9fa;
    }
    h1 {
      text-align: center;
      color: #333;
      font-size: 1.5em;
    }
    .container {
      background: white;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .form-group {
      margin-bottom: 18px;
    }
    label {
      font-weight: bold;
      display: block;
      margin-bottom: 8px;
    }
    .options {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    .option-btn {
      padding: 10px 14px;
      border: 1px solid #ccc;
      background: #f0f0f0;
      color: #333;
      cursor: pointer;
      border-radius: 4px;
      font-size: 14px;
    }
    .option-btn.active {
      background: #007bff;
      color: white;
      border-color: #007bff;
    }
    button#calculate {
      background: #28a745;
      color: white;
      border: none;
      padding: 12px;
      font-size: 16px;
      border-radius: 6px;
      cursor: pointer;
      width: 100%;
      margin-top: 15px;
    }
    button#copy {
      background: #007bff;
      color: white;
      border: none;
      padding: 12px;
      font-size: 16px;
      border-radius: 6px;
      cursor: pointer;
      width: 100%;
      margin-top: 15px;
    }
    .result {
      margin-top: 20px;
      padding: 18px;
      background: #f8fff8;
      border: 1px solid #d4edda;
      border-radius: 8px;
    }
    .price {
      font-weight: bold;
      color: #155724;
    }
    .note {
      font-size: 14px;
      color: #6c757d;
      margin-top: 15px;
      font-style: italic;
    }
    .result p {
      margin: 8px 0;
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∫–≤–∞—Ä—Ç–∞–ª—å–Ω—ã—Ö –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–π</h1>

    <!-- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã -->
    <div class="form-group">
      <label>–†–∞–∑–º–µ—Ä:</label>
      <div class="options" id="size-options">
        <button class="option-btn" data-size="mini">–ú–∏–Ω–∏</button>
        <button class="option-btn" data-size="midi">–ú–∏–¥–∏</button>
        <button class="option-btn" data-size="maxi">–ú–∞–∫—Å–∏</button>
      </div>
    </div>

    <div class="form-group">
      <label>–¢–∏—Ä–∞–∂:</label>
      <div class="options" id="tirazh-options">
        <button class="option-btn" data-tirazh="25">25</button>
        <button class="option-btn" data-tirazh="50">50</button>
        <button class="option-btn" data-tirazh="100">100</button>
        <button class="option-btn" data-tirazh="150">150</button>
        <button class="option-btn" data-tirazh="200">200</button>
        <button class="option-btn" data-tirazh="250">250</button>
        <button class="option-btn" data-tirazh="300">300</button>
      </div>
    </div>

    <div class="form-group">
      <label>–õ–∞–º–∏–Ω–∞—Ü–∏—è:</label>
      <div class="options" id="lam-options">
        <button class="option-btn" data-lam="none">–ù–µ—Ç</button>
        <button class="option-btn active" data-lam="1+0">1+0</button>
        <button class="option-btn" data-lam="1+1">1+1</button>
      </div>
    </div>

    <div class="form-group">
      <label>–¢–∏–ø –±–ª–æ–∫–∞:</label>
      <div class="options" id="block-options">
        <button class="option-btn active" data-block="matte">–ú–µ–ª–æ–≤–∞–Ω–Ω—ã–π</button>
        <button class="option-btn" data-block="metallic">–ú–µ—Ç–∞–ª–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (+20)</button>
        <button class="option-btn" data-block="offset">–û—Ñ—Å–µ—Ç–Ω—ã–π (-5)</button>
      </div>
    </div>

    <div class="form-group">
      <label>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:</label>
      <div class="options" id="extra-options">
        <button class="option-btn" data-extra="cursor">–ö—É—Ä—Å–æ—Ä (+140)</button>
      </div>
    </div>

    <div class="form-group">
      <label>–ù–∞—Ü–µ–Ω–∫–∞:</label>
      <div class="options" id="markup-options">
        <button class="option-btn" data-markup="20">+20%</button>
        <button class="option-btn" data-markup="5000">+5000 —Ä—É–±</button>
      </div>
    </div>

    <button id="calculate">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>

    <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç -->
    <div id="result" style="display: none;" class="result">
      <p><strong>–¶–µ–Ω–∞ –∑–∞ —à—Ç—É–∫—É (–±–µ–∑ –Ω–∞—Ü–µ–Ω–∫–∏):</strong> <span id="base-price-per-unit" class="price">‚Äî</span> ‚ÇΩ</p>
      <p><strong>–û–±—â–∞—è —Å—É–º–º–∞ (–±–µ–∑ –Ω–∞—Ü–µ–Ω–∫–∏):</strong> <span id="base-total" class="price">‚Äî</span> ‚ÇΩ</p>
      <p><strong>–¶–µ–Ω–∞ –∑–∞ —à—Ç—É–∫—É (—Å –Ω–∞—Ü–µ–Ω–∫–æ–π):</strong> <span id="final-price-per-unit" class="price">‚Äî</span> ‚ÇΩ</p>
      <p><strong>–û–±—â–∞—è —Å—É–º–º–∞ (—Å –Ω–∞—Ü–µ–Ω–∫–æ–π):</strong> <span id="final-total" class="price">‚Äî</span> ‚ÇΩ</p>
      <button id="copy">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏—Ç–æ–≥ (—Å –Ω–∞—Ü–µ–Ω–∫–æ–π)</button>
      <p class="note" id="cost-note"></p>
    </div>

    <p class="note">
      * –ë–ª–æ–∫ –∏–∑ www.polimat.ru. –ú–µ—Ç–∞–ª–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–ª–æ–∫–∏ +20 —Ä—É–±/—à—Ç. –û—Ñ—Å–µ—Ç–Ω—ã–µ –±–ª–æ–∫–∏ -5 —Ä—É–±/—à—Ç. –ú–∞–≥–Ω–∏—Ç–Ω—ã–π –∫—É—Ä—Å–æ—Ä +140 —Ä—É–±/—à—Ç
    </p>
  </div>

  <script>
    // –¢–∞–±–ª–∏—Ü–∞ —Ü–µ–Ω: [—Ç–∏—Ä–∞–∂, –º–∏–Ω–∏, –º–∏–¥–∏, –º–∞–∫—Å–∏]
    // –í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –£–í–ï–õ–ò–ß–ï–ù–´ –Ω–∞ 5 —Ä—É–± (–ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –∏—Å—Ö–æ–¥–Ω—ã–º–∏)
    const prices = [
      [25,  285, 355, 535],  // –±—ã–ª–æ 280 ‚Üí 285, 350 ‚Üí 355, 530 ‚Üí 535
      [50,  277, 305, 520],  // 272‚Üí277, 300‚Üí305, 515‚Üí520
      [100, 228, 270, 420],  // 223‚Üí228, 265‚Üí270, 415‚Üí420
      [150, 223, 260, 412],  // 218‚Üí223, 255‚Üí260, 407‚Üí412
      [200, 212, 255, 390],  // 207‚Üí212, 250‚Üí255, 385‚Üí390
      [250, 198, 250, 360],  // 193‚Üí198, 245‚Üí250, 355‚Üí360
      [300, 194, 248, 353]   // 189‚Üí194, 243‚Üí248, 348‚Üí353
    ];

    const lamination = {
      '1+0': {mini:15, midi:20, maxi:30},
      '1+1': {mini:30, midi:40, maxi:60}
    };

    // –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ —Ä–∞–∑–º–µ—Ä–∞–º
    const costInfo = {
      mini:  { block: 60, assembly: 50 },
      midi:  { block: 90, assembly: 60 },
      maxi:  { block: 110, assembly: 70 }
    };

    // –í—ã–±—Ä–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (—Å –¥–µ—Ñ–æ–ª—Ç–∞–º–∏)
    let sel = {
      size: null,
      tirazh: null,
      lam: '1+0',
      block: 'matte',
      extra: null,
      markup: null
    };

    // –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã–±–æ—Ä–∞
    function makeSelectable(containerId, key, defaultValue = null) {
      document.querySelectorAll(`#${containerId} .option-btn`).forEach(btn => {
        const value = btn.getAttribute(`data-${key}`);
        if (btn.classList.contains('active')) {
          sel[key] = value;
        }
        btn.addEventListener('click', () => {
          document.querySelectorAll(`#${containerId} .option-btn`).forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          sel[key] = value;
        });
      });

      // –ü–æ–¥—Å—Ç–∞–≤–ª—è–µ–º –¥–µ—Ñ–æ–ª—Ç, –µ—Å–ª–∏ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ
      if (!sel[key] && defaultValue) {
        sel[key] = defaultValue;
        const defaultBtn = document.querySelector(`#${containerId} [data-${key}="${defaultValue}"]`);
        if (defaultBtn) defaultBtn.classList.add('active');
      }
    }

    makeSelectable('size-options', 'size');
    makeSelectable('tirazh-options', 'tirazh');
    makeSelectable('lam-options', 'lam', '1+0');
    makeSelectable('block-options', 'block', 'matte');
    makeSelectable('extra-options', 'extra');
    makeSelectable('markup-options', 'markup');

    // –†–∞—Å—á—ë—Ç
    document.getElementById('calculate').onclick = function() {
      if (!sel.size || !sel.tirazh || !sel.block || !sel.markup) {
        alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ: —Ä–∞–∑–º–µ—Ä, —Ç–∏—Ä–∞–∂ –∏ –Ω–∞—Ü–µ–Ω–∫—É.");
        return;
      }

      const t = parseInt(sel.tirazh);
      const row = prices.find(r => r[0] === t);
      if (!row) {
        alert("–û—à–∏–±–∫–∞: –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–∏—Ä–∞–∂–∞ " + t);
        return;
      }

      const sizeIndex = {mini:1, midi:2, maxi:3}[sel.size];
      let pricePerUnitBase = row[sizeIndex]; // +5 —É–∂–µ —É—á—Ç–µ–Ω–æ

      // –õ–∞–º–∏–Ω–∞—Ü–∏—è
      if (sel.lam === '1+0' || sel.lam === '1+1') {
        pricePerUnitBase += lamination[sel.lam][sel.size];
      }

      // –ë–ª–æ–∫
      if (sel.block === 'metallic') pricePerUnitBase += 20;
      if (sel.block === 'offset') pricePerUnitBase -= 5;

      // –ö—É—Ä—Å–æ—Ä
      if (sel.extra === 'cursor') pricePerUnitBase += 140;

      // –ò—Ç–æ–≥–æ –±–µ–∑ –Ω–∞—Ü–µ–Ω–∫–∏
      const totalBase = pricePerUnitBase * t;

      // –° –Ω–∞—Ü–µ–Ω–∫–æ–π
      let totalFinal = totalBase;
      if (sel.markup === '20') totalFinal *= 1.2;
      if (sel.markup === '5000') totalFinal += 5000;

      const pricePerUnitFinal = Math.round(totalFinal / t);
      const totalFinalRounded = Math.round(totalFinal);

      // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
      const format = num => num.toLocaleString();

      // –í—ã–≤–æ–¥–∏–º —Ü–µ–Ω—ã
      document.getElementById('base-price-per-unit').textContent = format(pricePerUnitBase);
      document.getElementById('base-total').textContent = format(totalBase);
      document.getElementById('final-price-per-unit').textContent = format(pricePerUnitFinal);
      document.getElementById('final-total').textContent = format(totalFinalRounded);

      // –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –ø–æ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
      const sizeNames = { mini: '–ú–∏–Ω–∏', midi: '–ú–∏–¥–∏', maxi: '–ú–∞–∫—Å–∏' };
      const cost = costInfo[sel.size];
      document.getElementById('cost-note').innerHTML = `
        * –ë–ª–æ–∫ –∏–∑ <a href="https://www.polimat.ru" target="_blank">www.polimat.ru</a>. 
        –î–ª—è ${sizeNames[sel.size]}: —Å—Ç–æ–∏–º–æ—Å—Ç—å –±–ª–æ–∫–∞ ‚Äî ${cost.block} —Ä—É–±, —Å–±–æ—Ä–∫–∞ ‚Äî ${cost.assembly} —Ä—É–±
      `;

      // –¢–µ–∫—Å—Ç –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è (—Ç–æ–ª—å–∫–æ –∏—Ç–æ–≥, –±–µ–∑ –ø—Ä–∏–º–µ—á–∞–Ω–∏–π)
      window.copyText = `–¶–µ–Ω–∞ –∑–∞ —à—Ç—É–∫—É: ${format(pricePerUnitFinal)} ‚ÇΩ
–û–±—â–∞—è —Å—É–º–º–∞: ${format(totalFinalRounded)} ‚ÇΩ
* –ë–ª–æ–∫–∏ –ø–æ–ª–∏–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –º–µ–ª–æ–≤–∞–Ω–Ω—ã–µ. –ú–µ—Ç–∞–ª–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–ª–æ–∫–∏ +20 —Ä—É–±/—à—Ç. –û—Ñ—Å–µ—Ç–Ω—ã–µ –±–ª–æ–∫–∏ -5 —Ä—É–±/—à—Ç. –ú–∞–≥–Ω–∏—Ç–Ω—ã–π –∫—É—Ä—Å–æ—Ä +140 —Ä—É–±/—à—Ç`;

      document.getElementById('result').style.display = 'block';
    };

    // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
    document.getElementById('copy').onclick = function() {
      if (!window.copyText) {
        alert("–°–Ω–∞—á–∞–ª–∞ –Ω–∞–∂–º–∏—Ç–µ '–†–∞—Å—Å—á–∏—Ç–∞—Ç—å'");
        return;
      }

      if (navigator.clipboard) {
        navigator.clipboard.writeText(window.copyText).then(() => {
          this.textContent = "‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!";
          setTimeout(() => this.textContent = "üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏—Ç–æ–≥ (—Å –Ω–∞—Ü–µ–Ω–∫–æ–π)", 2000);
        }).catch(() => fallbackCopy());
      } else {
        fallbackCopy();
      }
    };

    // –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
    function fallbackCopy() {
      const text = window.copyText;
      const ta = document.createElement('textarea');
      ta.value = text;
      ta.style.position = 'fixed';
      ta.style.opacity = '0';
      document.body.appendChild(ta);
      ta.select();
      try {
        document.execCommand('copy');
        alert("‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ: " + text);
      } catch (e) {
        prompt("–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Ä—É—á–Ω—É—é:", text);
      }
      document.body.removeChild(ta);
    }
  </script>
</body>
</html>